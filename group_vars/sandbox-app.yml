---

# Application vars

app:
  name: "ws-sandbox" # this can contain characters such as -
  shortname: "wssand" # all lower-case, all one word
  env: "sandbox"
  working_folder: "/wsdocker"

raw_hash: "{{ app.name | hash('sha1') }}"
the_hash: "{{ raw_hash[:5] }}"

templates:
  docker_compose: "docker-compose.yml.j2"
  sync_gateway: "sync_gateway.json.j2"
  update_script: "update.sh.j2"

couchbase:
  version: "5.5.3"
  username: "admin"
  password: "securepassword"
  services: "data,index,query,fts,eventing"
  bucket: "sandbox"

sync_gateway:
  version: "2.1.2"
  user: "sync_gateway"
  password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61613966386663393639646136383936633137633432666662666138356337346434353864626335
          6230653238396466643434623663663832363663396666320a623839666238366666653035306236
          30306563373237346163333039343661376161313462623036373366313962373763366236396462
          3131656633303639330a313537343430626436343239383034316637366532663239633930623632
          64663135653631613666633535336338343234353531323038626533393062616133

openid:
  dev:
    url: "https://devukwest.whitespace.co.uk/browser/login"
    user_prefix: "wsdev"
    client_id: "4c939aea-47bf-46c5-8d14-d9cb4a81982e"
    issuer: "https://login.microsoftonline.com/0a0d0df1-e485-485d-9919-4d4980a42e50/v2.0"
    valkey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63663633626235663362393130616633323732383333373434636632316336353636303839326635
          6631613835303261303833393361613965363436613339640a656265616166393365633964303266
          32396661383238343532336331336335653336666330336639323663366136633230393439643031
          6665306266623062380a316631353936623337623765613462633437353430333965393665393934
          63626136383065373964363834353033643338626430396564306234363233383936353632346431
          6364663165373264663136303334626233396662356533323161

containers:
  - "{{ docker.registry_url }}/revapi:{{ app.env }}"
  - "{{ docker.registry_url }}/rebrowse:{{ app.env }}"
  - "{{ docker.registry_url }}/pdf-fragment-service:{{ app.env }}"
  - "{{ docker.registry_url }}/sapi:latest"
  - "{{ docker.registry_url }}/wsnotif:{{ app.env }}"
  - "{{ docker.registry_url }}/doc-router:{{ app.env }}"
  - "mkodockx/docker-clamav:latest"

docker:
  compose_version: "1.24.0"
  user: "admin-user"
  registry_url: "wsinternalcontainerregistry.azurecr.io"
  registry_user: "79b9cf91-8e83-4ac3-a24e-4fc74f791510"
  registry_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      36303566303261313137363632303432363263623364353631303863616530303234343036386366
      6661323437343032323633326338363630653434323235350a376464346262653333656331343766
      32366430623933336632353334363061353966326630313937363464316336366235613338626161
      3433333334316563340a663838303965383564393939323230326565353639353166646532333333
      39646661326437333234626336646530333464653138613833373338336431643566623634393265
      3637313762613362326339356231326165656435643561616566
  compose_command: "docker-compose up -d --no-deps"
  prune_command: "docker image prune -af"
  compose_path: "/usr/local/bin/docker-compose"

nginx_configs:
  - "default.conf"
  - "devsupport.conf"
  - "devtest.conf"
